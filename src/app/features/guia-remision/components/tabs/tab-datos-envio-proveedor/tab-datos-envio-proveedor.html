<div class="border-2 border-gray-300 rounded-xl overflow-hidden">

    <p-tabs value="0" lazy="true">
        <p-tablist>
            <p-tab value="0" class="py-3! data-[p-active=true]:bg-primary! data-[p-active=true]:text-white!">
                <div class="flex items-center gap-2">
                    <label for="" class="text-xs font-semibold pointer-events-none">Datos de envio</label>
                    @if(submitted && formDatosEnvio.invalid) {
                        <ng-icon name="tablerAlertCircle" />
                    }
                </div>
            </p-tab>
            <p-tab value="1" class="py-3! data-[p-active=true]:bg-primary! data-[p-active=true]:text-white!">
                <div class="flex items-center gap-2">
                    <label for="" class="text-xs font-semibold pointer-events-none">Datos del proveedor</label>
                    @if(submitted && formDatosProveedor.invalid) {
                        <ng-icon name="tablerAlertCircle" />
                    }
                </div>
            </p-tab>
        </p-tablist>
        <p-tabpanels>
            <p-tabpanel value="0">
                <div [formGroup]="formDatosEnvio" class="flex flex-col gap-4">
                    
                    @if( tipoGuia != 'TRANSPORTISTA'){
                        <div class="flex items-center gap-1">
                            <label for="" class="text-xs font-semibold text-primary uppercase">TIPO DE TRANSPORTE:</label>
                            <ng-icon name="heroQuestionMarkCircleSolid" class="text-[14px]! min-w-3.25!" pTooltip="Privado: Cuando el transporte de bienes es realizado por el propietario con vehículos propios. Público: Cuando se contrata a un transportista para que traslade los bienes." tooltipStyleClass="text-xs! text-center" tooltipPosition="top"/>
                            <div class="flex flex-row gap-1">
                                <input #privado type="radio" id="tipo_transporte_publico" name="tipo_transporte" formControlName="tipo_transporte" value="PUBLICO" class="hidden">
                                <input #publico type="radio" id="tipo_transporte_privado" name="tipo_transporte" formControlName="tipo_transporte" value="PRIVADO" class="hidden">
                                <p-button size="small"  styleClass="text-xs!" class="text-xs!" (click)="publico.click()" label="Privado" [severity]="f_datosEnvio.tipo_transporte.value == 'PRIVADO' ? 'primary' : 'secondary'"></p-button>
                                <p-button size="small"  styleClass="text-xs!" class="text-xs!" (click)="privado.click()" label="Público" [severity]="f_datosEnvio.tipo_transporte.value == 'PUBLICO' ? 'primary' : 'secondary'"></p-button>
                            </div>
                        </div>
                    }

                    <div class="grid grid-cols-3 gap-4">
                        @if(f_datosEnvio.tipo_transporte.value == 'PRIVADO'){
                            <div class="items-center gap-2">
                                <label class="text-xs text-gray-500 font-semibold">Fecha de inicio de traslado *</label>
                                <p-datepicker size="small" fluid [iconDisplay]="'input'" appendTo="body" [showIcon]="true" />
                            </div>
                        }@else {
                            <div class="items-center gap-2">
                                <label class="text-xs text-gray-500 font-semibold">Fecha de entrega al transportista</label>
                                <p-datepicker size="small" fluid [iconDisplay]="'input'" appendTo="body" [showIcon]="true" />
                            </div>
                        }
                        @if( tipoGuia != 'TRANSPORTISTA'){
                            <div class="items-center gap-2">
                                <label class="text-xs text-gray-500 font-semibold">Descripción del traslado</label>
                                <input placeholder="" pSize="small" fluid pInputText formControlName="descripcion_traslado" [class]="f_datosEnvio.descripcion_traslado.invalid && submitted ? ' shadow-none! border-primary-400! focus:border-primary-400!' : 'shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' " [invalid]="f_datosEnvio.descripcion_traslado.invalid && submitted" />
                            </div>
                        }
                        
                        <div class="grid grid-cols-2 gap-4">
                             <div>
                                <label class="text-xs text-gray-500 font-semibold">Und. del peso bruto *</label>
                                <p-select 
                                fluid
                                size="small" 
                                [inputSize]="2" 
                                panelStyleClass="text-xs!"
                                [class]=" f_datosEnvio.unidad_peso_bruto.invalid && submitted ? 'shadow-none! border-primary-400! focus:border-primary-400!' : ' shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' "
                                [options]="grossWeightUnits" 
                                formControlName="unidad_peso_bruto" 
                                placeholder="" 
                                optionValue="value" 
                                optionLabel="description" 
                                appendTo="body"
                                />
                             </div>
                             <div>
                                <label class="text-xs text-gray-500 font-semibold">Peso bruto total *</label>
                                <p-inputnumber fluid size="small" placeholder="0.000" formControlName="peso_bruto_total" inputId="minmaxfraction" mode="decimal" [maxFractionDigits]="3" [maxlength]="15" [class]="f_datosEnvio.peso_bruto_total.invalid && submitted ? ' shadow-none! border-primary-400! focus:border-primary-400!' : 'shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' " [invalid]="f_datosEnvio.peso_bruto_total.invalid && submitted"/>
                             </div>
                        </div>

                        @if( tipoGuia == 'TRANSPORTISTA'){
                        <div class="items-center gap-2">
                            <label for="" class="text-xs text-gray-500 font-semibold">Pagador del flete *</label>
                            <p-select 
                            fluid
                            size="small" 
                            [inputSize]="2" 
                            panelStyleClass="text-xs!"
                            [class]=" f_datosEnvio.pagador_flete.invalid && submitted ? 'shadow-none! border-primary-400! focus:border-primary-400!' : ' shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' "
                            [options]="freightPayers" 
                            formControlName="pagador_flete" 
                            placeholder="" 
                            optionValue="value" 
                            optionLabel="description" 
                            appendTo="body"
                            />
                        </div>
                        }
                        
                    </div>

                    <div class="grid grid-cols-4 gap-4">
                        @if(f_datosEnvio.pagador_flete.value == 'SUBCONTRATADOR'){
                            <div class="items-center gap-2">
                                <label class="text-xs text-gray-500 font-semibold">RUC *</label>
                                <input placeholder="" pSize="small" fluid pInputText formControlName="ruc_subcontratador" [class]="f_datosEnvio.ruc_subcontratador.invalid && submitted ? ' shadow-none! border-primary-400! focus:border-primary-400!' : 'shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' " [invalid]="f_datosEnvio.ruc_subcontratador.invalid && submitted" />
                            </div>
                            <div class="items-center gap-2">
                                <label class="text-xs text-gray-500 font-semibold">Nombre o Razón Social *</label>
                                <input placeholder="" pSize="small" fluid pInputText formControlName="nombre_rsocial_subcontratador" [class]="f_datosEnvio.nombre_rsocial_subcontratador.invalid && submitted ? ' shadow-none! border-primary-400! focus:border-primary-400!' : 'shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' " [invalid]="f_datosEnvio.nombre_rsocial_subcontratador.invalid && submitted" />
                            </div>
                        }

                        @if(f_datosEnvio.pagador_flete.value == 'OTRO'){
                            <div class="items-center gap-2">
                                <label class="text-xs text-gray-500 font-semibold">N° Doc. de identidad *</label>
                                <input placeholder="" pSize="small" fluid pInputText formControlName="numero_documento_tercero" [class]="f_datosEnvio.numero_documento_tercero.invalid && submitted ? ' shadow-none! border-primary-400! focus:border-primary-400!' : 'shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' " [invalid]="f_datosEnvio.numero_documento_tercero.invalid && submitted" />
                            </div>
                            <div class="items-center gap-2">
                                <label class="text-xs text-gray-500 font-semibold">Nombre o Razón Social *</label>
                                <input placeholder="" pSize="small" fluid pInputText formControlName="nombre_rsocial_tercero" [class]="f_datosEnvio.nombre_rsocial_tercero.invalid && submitted ? ' shadow-none! border-primary-400! focus:border-primary-400!' : 'shadow-none!  focus:border-gray-500! hover:border-gray-400! hover:shadow-xs!' " [invalid]="f_datosEnvio.nombre_rsocial_tercero.invalid && submitted" />
                            </div>
                        }
                    </div>

                </div>
            </p-tabpanel>
            <p-tabpanel value="1">
                <div [formGroup]="formDatosProveedor" class="flex flex-col gap-4">
                    
                </div>
            </p-tabpanel>
        </p-tabpanels>
    </p-tabs>
</div>
